<!DOCTYPE html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0, maximum-scale=10"/><meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1"/><title>ひろぽっぽれす - いくらが大好きです。Webの開発やってます</title><link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml"/><link href="http://fonts.googleapis.com/css?family=Raleway" rel="stylesheet"/><link href="/css/hiropopless.css" rel="stylesheet"/><meta property="og:type" content="article"/><meta property="og:description" content="いくらが大好きです。Webの開発やってます。"/><meta property="og:site_name" content="ひろぽっぽれす"/><meta property="og:title" content="ひろぽっぽれす"/><meta property="og:url" content="http://hiropo.co.uk"/></head><body><header class="header"><h1 class="hero-site"><a href="http://hiropo.co.uk"> ひろぽっぽれす</a></h1><p class="description-site"> いくらが大好きです。Webの開発やってます。 </p><ul class="follow-links"><li><a class="twitter-follow-button" href="https://twitter.com/funnythingz" data-show-count="false">Follow @funnythingz</a><script>
            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
          </script></li><li><iframe src="http://ghbtns.com/github-btn.html?user=funnythingz&type=follow&count=false" allowtransparency="true" frameborder="0" scrolling="0" width="165" height="20"></iframe></li></ul><figure class="figure-profile"><img src="/imgs/archives/2013/08/6S6A7152_12.jpg"/></figure></header><section id="main" class="content" role="main"><section class="entries"><ul class="pagenations"><li class="old-page"><a href="/page/2/">Old entry</a></li></ul><article class="entry"><h2><a href="/archives/994.html">Rails5 インストール時にeventmachineでハマる</a></h2><ul><li class="date"> 2015.12.25 </li></ul><ul class="external-link"><li><a href="http://b.hatena.ne.jp/entry/http://hiropo.co.uk/archives/994.html" class="hatena-bookmark-button" data-hatena-bookmark-title="Rails5 インストール時にeventmachineでハマる" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;"/><script src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></a></li><li><div class="fb-like" data-href="http://hiropo.co.uk/archives/994.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div><div id="fb-root"></div><script>
        (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1386417958332605&version=v2.0";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
      </script></li><li><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiropo.co.uk/archives/994.html" data-via="funnythingz" data-text="Rails5 インストール時にeventmachineでハマる"></a><script>
        window.twttr=(function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs"));
      </script></li></ul><p><a href="https://rubygems.org/gems/rails/versions/5.0.0.beta1">Rails5 beta1</a>が出たので試してみようと思い、インストール時に一箇所ハマりかけたので記録として残しておきます。</p><h2>環境</h2><pre class="highlight plaintext"><code>ruby 2.2.4
bundler 1.11.2
Rails 5.0.0.beta1
</code></pre><p>あとは</p><pre class="highlight plaintext"><code>% gem install rails --pre
</code></pre><p>でインストールを実行。この際にgemのエラーでインストールエラーになる。</p><h2>ハマり方</h2><p>ログ見れなくなっちゃったので忘れましたが <code>eventmachine</code> が <code>openssl.h</code> を読めませんよ的なエラー。</p><h2>解決方法</h2><p><code>eventmachine</code> インストール時にコケるのでオプションつけてインストール</p><pre class="highlight plaintext"><code>% gem install eventmachine -- --with-cppflags=-I/usr/local/opt/openssl/include
</code></pre><p><a href="https://github.com/eventmachine/eventmachine/issues/602">eventmachineのissueにもあがってました</a></p><p>これで再度Railsのインストールを実行</p><pre class="highlight plaintext"><code>% gem install rails --pre
</code></pre><p>これで無事にインストールできました。</p></article><article class="entry"><h2><a href="/archives/993.html">Android2系でインストール時にINSTALL_FAILED_DEXOPTエラー</a></h2><ul><li class="date"> 2015.11.27 </li></ul><ul class="external-link"><li><a href="http://b.hatena.ne.jp/entry/http://hiropo.co.uk/archives/993.html" class="hatena-bookmark-button" data-hatena-bookmark-title="Android2系でインストール時にINSTALL_FAILED_DEXOPTエラー" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;"/><script src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></a></li><li><div class="fb-like" data-href="http://hiropo.co.uk/archives/993.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div><div id="fb-root"></div><script>
        (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1386417958332605&version=v2.0";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
      </script></li><li><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiropo.co.uk/archives/993.html" data-via="funnythingz" data-text="Android2系でインストール時にINSTALL_FAILED_DEXOPTエラー"></a><script>
        window.twttr=(function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs"));
      </script></li></ul><p>お久しぶりです。Goエンジニアやってたと思ったら今ではAndroidエンジニアやってる今日このごろです。</p><p>Android2系で<a href="https://www.facebook.com/notes/facebook-engineering/under-the-hood-dalvik-patch-for-facebook-for-android/10151345597798920">こんな感じのエラー</a>に遭遇してしまい、メソッド数を減らさなくてはいけないため対処した内容をメモっておきます。</p><p>どうもgradleで <code>com.google.android.gms:play-services</code> を読み込んでいると、ほとんど使ってない余計なものがたくさんあるようで、なんと <code>18513</code> もメソッドがあるようです。</p><pre class="highlight plaintext"><code>dependencies {
  compile 'com.google.android.gms:play-services:6.5.+'
}
</code></pre><p>なので、これを</p><pre class="highlight plaintext"><code>dependencies {
  compile 'com.google.android.gms:play-services-base:6.5.87'
  compile 'com.google.android.gms:play-services-identity:6.5.87'
}
</code></pre><p>こんな感じに必要なものだけをcompileするようにします。これでメソッド数がかなり減らせるのと、ビルド時間もかなり短縮できます。</p><p>さらに<a href="http://android-developers.blogspot.de/2014/12/google-play-services-and-dex-method.html">詳しくはこちら</a>をみてみてください。</p></article><article class="entry"><h2><a href="/archives/992.html">GoでJSONを返す</a></h2><ul><li class="date"> 2015.07.28 </li></ul><ul class="external-link"><li><a href="http://b.hatena.ne.jp/entry/http://hiropo.co.uk/archives/992.html" class="hatena-bookmark-button" data-hatena-bookmark-title="GoでJSONを返す" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;"/><script src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></a></li><li><div class="fb-like" data-href="http://hiropo.co.uk/archives/992.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div><div id="fb-root"></div><script>
        (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1386417958332605&version=v2.0";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
      </script></li><li><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiropo.co.uk/archives/992.html" data-via="funnythingz" data-text="GoでJSONを返す"></a><script>
        window.twttr=(function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs"));
      </script></li></ul><p>仕事でGoでAPI開発やってるのですが、JSON書き出しのところメモっておきます。</p><h2>基本的なJSONの書き出し方</h2><p>structでオブジェクトを定義してjson化します。</p><pre class="highlight go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
    </span><span class="s">"encoding/json"</span><span class="x">
    </span><span class="s">"fmt"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">Object</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">Name</span><span class="x">  </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"name"`</span><span class="x">
    </span><span class="n">Value</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"value"`</span><span class="x">
    </span><span class="n">Memo</span><span class="x">  </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"memo"`</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">o</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">Object</span><span class="p">{</span><span class="n">Name</span><span class="o">:</span><span class="x"> </span><span class="s">"unko"</span><span class="p">,</span><span class="x"> </span><span class="n">Value</span><span class="o">:</span><span class="x"> </span><span class="s">"ばりゅー"</span><span class="p">,</span><span class="x"> </span><span class="n">Memo</span><span class="o">:</span><span class="x"> </span><span class="s">"めもめもー"</span><span class="p">}</span><span class="x">

    </span><span class="n">response</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">json</span><span class="o">.</span><span class="n">Marshal</span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="x">
    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">response</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><p>こんな感じのコードだと</p><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"unko"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">"ばりゅー"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"memo"</span><span class="p">:</span><span class="s2">"めもめもー"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><p>こんな感じのJSONとして書き出されます。とてもシンプルです。</p><h2>書き出したくないプロパティがある場合</h2><p>structの中で書き出したくないパラメータがあります。 この場合はアノテーションを使って <code>-</code> を与えます。</p><pre class="highlight go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
    </span><span class="s">"encoding/json"</span><span class="x">
    </span><span class="s">"fmt"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">Object</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">Name</span><span class="x">  </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"name"`</span><span class="x">
    </span><span class="n">Value</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"value"`</span><span class="x">
    </span><span class="n">Memo</span><span class="x">  </span><span class="kt">string</span><span class="x"> </span><span class="s">`json:"-"`</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">o</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">Object</span><span class="p">{</span><span class="n">Name</span><span class="o">:</span><span class="x"> </span><span class="s">"unko"</span><span class="p">,</span><span class="x"> </span><span class="n">Value</span><span class="o">:</span><span class="x"> </span><span class="s">"ばりゅー"</span><span class="p">,</span><span class="x"> </span><span class="n">Memo</span><span class="o">:</span><span class="x"> </span><span class="s">"ここは表示されないよー"</span><span class="p">}</span><span class="x">

    </span><span class="n">response</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">json</span><span class="o">.</span><span class="n">Marshal</span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="x">
    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">response</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><p>で、こんな感じにo.Memoは表示されなくなります。</p><pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"unko"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"value"</span><span class="p">:</span><span class="s2">"ばりゅー"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><p>GoはJSONの扱いがとても簡単なのでした。</p></article><article class="entry"><h2><a href="/archives/991.html">ようやくモバイルフレンドリー化した</a></h2><ul><li class="date"> 2015.07.26 </li></ul><ul class="external-link"><li><a href="http://b.hatena.ne.jp/entry/http://hiropo.co.uk/archives/991.html" class="hatena-bookmark-button" data-hatena-bookmark-title="ようやくモバイルフレンドリー化した" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;"/><script src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></a></li><li><div class="fb-like" data-href="http://hiropo.co.uk/archives/991.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div><div id="fb-root"></div><script>
        (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1386417958332605&version=v2.0";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
      </script></li><li><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiropo.co.uk/archives/991.html" data-via="funnythingz" data-text="ようやくモバイルフレンドリー化した"></a><script>
        window.twttr=(function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs"));
      </script></li></ul><p>ひろぽっぽれすがやっとモバイルフレンドリーになりました。</p><p>何が悪かったかっていうと、画像がスマフォで見た時にどうやらはみ出しまくるサイズになっていたようで。</p><p>サクッと</p><pre class="highlight scss"><code><span class="nc">.article</span> <span class="p">{</span>
  <span class="nt">img</span> <span class="p">{</span>
    <span class="nl">max-width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><p>にしてやりましたよ。</p><p>ﾄﾞﾔｧ</p><p>夏暑いです。</p></article><article class="entry"><h2><a href="/archives/990.html">美人時計のgemつくった</a></h2><ul><li class="date"> 2015.03.25 </li></ul><ul class="external-link"><li><a href="http://b.hatena.ne.jp/entry/http://hiropo.co.uk/archives/990.html" class="hatena-bookmark-button" data-hatena-bookmark-title="美人時計のgemつくった" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;"/><script src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></a></li><li><div class="fb-like" data-href="http://hiropo.co.uk/archives/990.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div><div id="fb-root"></div><script>
        (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1386417958332605&version=v2.0";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
      </script></li><li><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiropo.co.uk/archives/990.html" data-via="funnythingz" data-text="美人時計のgemつくった"></a><script>
        window.twttr=(function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs"));
      </script></li></ul><p>Hello, world. funnythingzです。めんどくさすぎてブログを放置していました。明日から本気出す。</p><p>プルリクにLGTMするときに美人時計を表示したいなと思ったのでなんとなく<a href="https://github.com/funnythingz/bijint">bijint</a>というgemをつくってみました。けっこう適当です。</p><p>Chromeエクステンションとかまではつくるのがめんどくさかったのでとりあえずコマンドベースで美人時計の画像パスのマークダウンとか生成してくれます。あまり難しいことはしていません。</p><h2>bijintをインストールする</h2><pre class="highlight plaintext"><code>$ gem install bijint
</code></pre><p>とっても簡単インストールです。</p><h2>使い方</h2><p>一番シンプルなコマンドです。今の時間の画像パスを生成します。</p><pre class="highlight plaintext"><code>$ bijint
http://www.bijint.com/assets/pict/tokyo/pc/0039.jpg
</code></pre><p>ランダムな時間の画像パスを生成します。</p><pre class="highlight plaintext"><code>$ bijint random
http://www.bijint.com/assets/pict/tokyo/pc/1530.jpg
</code></pre><p>今の時間の画像パスをマークダウン形式で生成してくれます。</p><pre class="highlight plaintext"><code>$ bijint md
[![bijint](http://www.bijint.com/assets/pict/tokyo/pc/0043.jpg)](http://www.bijint.com/assets/pict/tokyo/pc/0043.jpg)
</code></pre><p>ランダムな時間のマークダウン形式の画像パスを生成してくれます。</p><pre class="highlight plaintext"><code>$ bijint md_random
[![bijint](http://www.bijint.com/assets/pict/tokyo/pc/1407.jpg)](http://www.bijint.com/assets/pict/tokyo/pc/1407.jpg)
</code></pre><p><code>pbcopy</code> と組み合わせて使うとクリップボードにコピーしてくれるので貼り付けも簡単です。</p><pre class="highlight plaintext"><code>$ bijint | pbcopy
</code></pre><p>それでは良き美人時計ライフを！</p></article><article class="entry"><h2><a href="/archives/989.html">GolangでTruncateできるsunnydayというパッケージをつくった</a></h2><ul><li class="date"> 2015.02.14 </li></ul><ul class="external-link"><li><a href="http://b.hatena.ne.jp/entry/http://hiropo.co.uk/archives/989.html" class="hatena-bookmark-button" data-hatena-bookmark-title="GolangでTruncateできるsunnydayというパッケージをつくった" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;"/><script src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></a></li><li><div class="fb-like" data-href="http://hiropo.co.uk/archives/989.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div><div id="fb-root"></div><script>
        (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1386417958332605&version=v2.0";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
      </script></li><li><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiropo.co.uk/archives/989.html" data-via="funnythingz" data-text="GolangでTruncateできるsunnydayというパッケージをつくった"></a><script>
        window.twttr=(function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs"));
      </script></li></ul><p>こんにちは、funnythingzです。GoでTruncateがありそうでなかったのでつくってみました。超シンプルです。</p><p><a href="https://github.com/funnythingz/sunnyday">github.com/funnythingz/sunnyday</a></p><p>使い方は超簡単です。</p><p>まず <code>go get</code> します。</p><pre class="highlight plaintext"><code>% go get github.com/funnythingz/sunnyday
</code></pre><p>importして <code>sunnyday.Truncate</code> をこんな感じで呼び出します。</p><pre class="highlight go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="p">(</span><span class="x">
    </span><span class="s">"fmt"</span><span class="x">
    </span><span class="s">"github.com/funnythingz/sunnyday"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">sunnyday</span><span class="o">.</span><span class="n">Truncate</span><span class="p">(</span><span class="s">"うんこっこたのしいお！"</span><span class="p">,</span><span class="x"> </span><span class="m">5</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><pre class="highlight plaintext"><code>うんこっこ…
</code></pre><p>超シンプルです。簡単です。</p><p><code>...</code> をカスタムするには第3引数にカスタム用のstringを渡すだけです。</p><pre class="highlight go"><code><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">sunnyday</span><span class="o">.</span><span class="n">Truncate</span><span class="p">(</span><span class="s">"うんこっこたのしいお！"</span><span class="p">,</span><span class="x"> </span><span class="m">5</span><span class="p">,</span><span class="x"> </span><span class="s">"...more"</span><span class="p">))</span><span class="x">
</span></code></pre><pre class="highlight plaintext"><code>うんこっこ...more
</code></pre><p>超カンタンです。難しいことはなにひとつありません。</p><p>こんな感じであると地味に便利なTruncateです。ぜひ使ってみてください。</p></article><article class="entry"><h2><a href="/archives/988.html">goqueryでHTMLをパースする</a></h2><ul><li class="date"> 2015.02.05 </li></ul><ul class="external-link"><li><a href="http://b.hatena.ne.jp/entry/http://hiropo.co.uk/archives/988.html" class="hatena-bookmark-button" data-hatena-bookmark-title="goqueryでHTMLをパースする" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;"/><script src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></a></li><li><div class="fb-like" data-href="http://hiropo.co.uk/archives/988.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div><div id="fb-root"></div><script>
        (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1386417958332605&version=v2.0";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
      </script></li><li><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiropo.co.uk/archives/988.html" data-via="funnythingz" data-text="goqueryでHTMLをパースする"></a><script>
        window.twttr=(function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs"));
      </script></li></ul><p>HTMLのパースをするならgoquery！goquery便利すぎて泣いた。 jQueryっぽく使えて良いです。</p><p>まずは<a href="https://github.com/PuerkitoBio/goquery">goquery</a>を入れましょう。</p><pre class="highlight plaintext"><code>% go get github.com/PuerkitoBio/goquery
</code></pre><h2>HTMLをパースする</h2><p>それではパースしてみましょう。 HTMLのパースのやり方はいくつかあります。</p><h3>URLから直接パースする</h3><pre class="highlight go"><code><span class="n">doc</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">goquery</span><span class="o">.</span><span class="n">NewDocument</span><span class="p">(</span><span class="s">"http://yahoo.co.jp"</span><span class="p">)</span><span class="x">
</span></code></pre><h3>文字列をパースする</h3><pre class="highlight go"><code><span class="n">html</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">`&lt;h1 class="heading"&gt;見出し&lt;/h1&gt;`</span><span class="x">
</span><span class="n">r</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">strings</span><span class="o">.</span><span class="n">NewReader</span><span class="p">(</span><span class="n">html</span><span class="p">)</span><span class="x">
</span><span class="n">doc</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">goquery</span><span class="o">.</span><span class="n">NewDocumentFromReader</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="x">
</span></code></pre><h2>パースしたHTMLから要素を取り出す</h2><p>goqueryでパースしたHTMLから要素を取り出してみましょう</p><pre class="highlight go"><code><span class="n">doc</span><span class="o">.</span><span class="n">Find</span><span class="p">(</span><span class="s">".heading"</span><span class="p">)</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span><span class="x">  </span><span class="c">//=&gt; 見出し</span><span class="x">
</span></code></pre><p>こんな感じでとっても簡単です。</p><h2>goqueryのひと通りの操作のテストを書く</h2><p>goqueryのテストをざっくり書いてみるとこうなります。</p><pre class="highlight go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
    </span><span class="s">"github.com/PuerkitoBio/goquery"</span><span class="x">
    </span><span class="s">"strings"</span><span class="x">
    </span><span class="s">"testing"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">TestParseHtml</span><span class="p">(</span><span class="n">t</span><span class="x"> </span><span class="o">*</span><span class="n">testing</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">html</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">`
&lt;section&gt;
&lt;h1 class="heading"&gt;うんこっこ&lt;/h1&gt;
&lt;p class="lead"&gt;なんかにおうってばよ&lt;/p&gt;
&lt;/section&gt;
`</span><span class="x">
    </span><span class="n">r</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">strings</span><span class="o">.</span><span class="n">NewReader</span><span class="p">(</span><span class="n">html</span><span class="p">)</span><span class="x">
    </span><span class="n">doc</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">goquery</span><span class="o">.</span><span class="n">NewDocumentFromReader</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="x">

    </span><span class="n">docHeading</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">doc</span><span class="o">.</span><span class="n">Find</span><span class="p">(</span><span class="s">".heading"</span><span class="p">)</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span><span class="x">
    </span><span class="n">heading</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"うんこっこ"</span><span class="x">

    </span><span class="k">if</span><span class="x"> </span><span class="n">docHeading</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="n">heading</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="n">t</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"got %v want %v"</span><span class="p">,</span><span class="x"> </span><span class="n">docHeading</span><span class="p">,</span><span class="x"> </span><span class="n">heading</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">docLead</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">doc</span><span class="o">.</span><span class="n">Find</span><span class="p">(</span><span class="s">".lead"</span><span class="p">)</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span><span class="x">
    </span><span class="n">lead</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"なんかにおうってばよ"</span><span class="x">

    </span><span class="k">if</span><span class="x"> </span><span class="n">docLead</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="n">lead</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="n">t</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s">"got %v want %v"</span><span class="p">,</span><span class="x"> </span><span class="n">docLead</span><span class="p">,</span><span class="x"> </span><span class="n">lead</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><p>goのテスト実行コマンドで実行してみましょう。</p><pre class="highlight shell"><code><span class="gp">% </span>go <span class="nb">test</span> -v
<span class="o">===</span> RUN TestParseHtml
--- PASS: TestParseHtml <span class="o">(</span>0.00s<span class="o">)</span>
PASS
ok
</code></pre><p>こんな感じで動けばテスト完了です。 今回のテストコードは<a href="https://github.com/funnythingz/go-test/blob/master/goquery_test.go">GitHub</a>にもあげました。</p><p>テスト、だいじだよ、テスト。</p></article><article class="entry"><h2><a href="/archives/987.html">インストールしたGoパッケージを最新にする</a></h2><ul><li class="date"> 2015.02.04 </li></ul><ul class="external-link"><li><a href="http://b.hatena.ne.jp/entry/http://hiropo.co.uk/archives/987.html" class="hatena-bookmark-button" data-hatena-bookmark-title="インストールしたGoパッケージを最新にする" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;"/><script src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></a></li><li><div class="fb-like" data-href="http://hiropo.co.uk/archives/987.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div><div id="fb-root"></div><script>
        (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1386417958332605&version=v2.0";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
      </script></li><li><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiropo.co.uk/archives/987.html" data-via="funnythingz" data-text="インストールしたGoパッケージを最新にする"></a><script>
        window.twttr=(function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs"));
      </script></li></ul><p>go get でインストールしたパッケージたちを一気にアップグレードする。</p><pre class="highlight shell"><code><span class="gp">% </span><span class="nb">cd</span> <span class="nv">$GOPATH</span>
<span class="gp">% </span>go clean -i ./...
<span class="gp">% </span>go install ...
</code></pre><p>これでいけた！</p></article><article class="entry"><h2><a href="/archives/986.html">Golangでbluemondayを使ってhtml_safeなsanitizeをする</a></h2><ul><li class="date"> 2015.01.25 </li></ul><ul class="external-link"><li><a href="http://b.hatena.ne.jp/entry/http://hiropo.co.uk/archives/986.html" class="hatena-bookmark-button" data-hatena-bookmark-title="Golangでbluemondayを使ってhtml_safeなsanitizeをする" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;"/><script src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></a></li><li><div class="fb-like" data-href="http://hiropo.co.uk/archives/986.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div><div id="fb-root"></div><script>
        (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1386417958332605&version=v2.0";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
      </script></li><li><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiropo.co.uk/archives/986.html" data-via="funnythingz" data-text="Golangでbluemondayを使ってhtml_safeなsanitizeをする"></a><script>
        window.twttr=(function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs"));
      </script></li></ul><p>ここ数年ブログを書くのが億劫すぎていたのでまさかの1日2連続エントリーです。2015年はブログもちゃんと書くぞ！</p><p><a href="http://hiropo.co.uk/archives/985.html">GolangでBlackfridayを使ってMarkdownをHTMLに変換する</a></p><p>上記記事でも軽くふれたのですが、sanitizerの<a href="https://github.com/microcosm-cc/bluemonday">microcosm-cc/bluemonday</a>も便利なので(名前が鬱になるけど)使ってみました。</p><h3>html</h3><p>hoge.html</p><pre class="highlight html"><code><span class="nt">&lt;h1&gt;</span>hoge<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>hogehoge<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;script&gt;</span><span class="nx">alert</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;style&gt;body</span> <span class="p">{</span><span class="nl">font-size</span><span class="p">:</span> <span class="m">100px</span><span class="p">;}</span><span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;footer&gt;</span><span class="ni">&amp;copy;</span> funnythingz<span class="nt">&lt;/footer&gt;</span>
</code></pre><h3>Go</h3><p>demo.go</p><pre class="highlight go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
    </span><span class="s">"fmt"</span><span class="x">
    </span><span class="s">"github.com/microcosm-cc/bluemonday"</span><span class="x">
    </span><span class="s">"io/ioutil"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">check</span><span class="p">(</span><span class="n">e</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">e</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="nb">panic</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">html</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadFile</span><span class="p">(</span><span class="s">"hoge.html"</span><span class="p">)</span><span class="x">
    </span><span class="n">check</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">

    </span><span class="n">p</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bluemonday</span><span class="o">.</span><span class="n">UGCPolicy</span><span class="p">()</span><span class="x">
    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">Sanitize</span><span class="p">(</span><span class="kt">string</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">html</span><span class="p">))))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><h3>出力結果</h3><pre class="highlight shell"><code><span class="gp">% </span>go run demo.go
</code></pre><p>で実行すると</p><pre class="highlight html"><code><span class="nt">&lt;h1&gt;</span>hoge<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>hogehoge<span class="nt">&lt;/p&gt;</span>


© funnythingz
</code></pre><p>となってhtml_safeな感じで出力されます。ちなみにbluemondayのポリシーで許可されているタグは下記になります。</p><blockquote><p>article, aside, figure, section, summary, h1~h6, hgroup, br, div, hr, p, span, wbr, abbr, acronym, cite, code, dfn, em, figcaption, mark, s, samp, strong, sub, sup, var, b, i, pre, small, strike, tt, u, rp, rt, ruby</p></blockquote><p>詳細は<a href="https://github.com/microcosm-cc/bluemonday/blob/master/policies.go">bluemondayのコード</a>をみてみてください。</p><p>こんな感じでblackfridayとbluemondayを組み合わせて使うといろいろできそうですね！</p></article><article class="entry"><h2><a href="/archives/985.html">GolangでBlackfridayを使ってMarkdownをHTMLに変換する</a></h2><ul><li class="date"> 2015.01.25 </li></ul><ul class="external-link"><li><a href="http://b.hatena.ne.jp/entry/http://hiropo.co.uk/archives/985.html" class="hatena-bookmark-button" data-hatena-bookmark-title="GolangでBlackfridayを使ってMarkdownをHTMLに変換する" data-hatena-bookmark-layout="standard-balloon" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;"/><script src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script></a></li><li><div class="fb-like" data-href="http://hiropo.co.uk/archives/985.html" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div><div id="fb-root"></div><script>
        (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1386417958332605&version=v2.0";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
      </script></li><li><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://hiropo.co.uk/archives/985.html" data-via="funnythingz" data-text="GolangでBlackfridayを使ってMarkdownをHTMLに変換する"></a><script>
        window.twttr=(function(d,s,id){var t,js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id)){return}js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);return window.twttr||(t={_e:[],ready:function(f){t._e.push(f)}})}(document,"script","twitter-wjs"));
      </script></li></ul><p>Rails大好きfunnythingzです。TypeScriptよりもRails書いてます。</p><p>Railsに慣れすぎてしまうと他のことができなくなってやばいと思い2015年はGolangに力を入れていこうと思っています。Go界隈の流れの早さについていけていません。</p><p>それはさておきGoでMarkdownをHTMLにしたいなと思いGitHubをいろいろ探していたら<a href="https://github.com/russross/blackfriday">russross/blackfriday</a>というものを見つけました。名前が中二感ハンパなくてカッコイイです。sanitizerの<a href="https://github.com/microcosm-cc/bluemonday">microcosm-cc/bluemonday</a>というものもあります。名前カッコイイわー。</p><p>とりあえず使い方は簡単なのでコード書いておきます。</p><h3>markdown</h3><p>hoge.md</p><pre class="highlight plaintext"><code># hoge

hogehoge

- hoge
- hoge

## hoge
</code></pre><h3>Go</h3><p>demo.go</p><pre class="highlight go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
    </span><span class="s">"fmt"</span><span class="x">
    </span><span class="s">"github.com/russross/blackfriday"</span><span class="x">
    </span><span class="s">"io/ioutil"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">check</span><span class="p">(</span><span class="n">e</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">e</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
        </span><span class="nb">panic</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="x">
    </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">md</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadFile</span><span class="p">(</span><span class="s">"hoge.md"</span><span class="p">)</span><span class="x">
    </span><span class="n">check</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="x">
    </span><span class="n">output</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">blackfriday</span><span class="o">.</span><span class="n">MarkdownCommon</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">md</span><span class="p">))</span><span class="x">
    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">output</span><span class="p">))</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><h3>出力結果</h3><pre class="highlight shell"><code><span class="gp">% </span>go run demo.go
</code></pre><p>で実行すると</p><pre class="highlight html"><code><span class="nt">&lt;h1&gt;</span>hoge<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span>hogehoge<span class="nt">&lt;/p&gt;</span>

<span class="nt">&lt;ul&gt;</span>
<span class="nt">&lt;li&gt;</span>hoge<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;li&gt;</span>hoge<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>

<span class="nt">&lt;h2&gt;</span>hoge<span class="nt">&lt;/h2&gt;</span>
</code></pre><p>となります。簡単！</p></article><ul class="pagenations"><li class="old-page"><a href="/page/2/">Old entry</a></li></ul></section></section><aside class="aside"><div class="aside-wrapper"><section class="article-list"><h2> Recent Articles </h2><ol class="articles"><li><a href="/archives/994.html">Rails5 インストール時にeventmachineでハマる</a><small class="meta">2015.12.25</small></li><li><a href="/archives/993.html">Android2系でインストール時にINSTALL_FAILED_DEXOPTエラー</a><small class="meta">2015.11.27</small></li><li><a href="/archives/992.html">GoでJSONを返す</a><small class="meta">2015.07.28</small></li><li><a href="/archives/991.html">ようやくモバイルフレンドリー化した</a><small class="meta">2015.07.26</small></li><li><a href="/archives/990.html">美人時計のgemつくった</a><small class="meta">2015.03.25</small></li><li><a href="/archives/989.html">GolangでTruncateできるsunnydayというパッケージをつくった</a><small class="meta">2015.02.14</small></li><li><a href="/archives/988.html">goqueryでHTMLをパースする</a><small class="meta">2015.02.05</small></li><li><a href="/archives/987.html">インストールしたGoパッケージを最新にする</a><small class="meta">2015.02.04</small></li><li><a href="/archives/986.html">Golangでbluemondayを使ってhtml_safeなsanitizeをする</a><small class="meta">2015.01.25</small></li><li><a href="/archives/985.html">GolangでBlackfridayを使ってMarkdownをHTMLに変換する</a><small class="meta">2015.01.25</small></li></ol></section><section class="article-list"><h2> Tags </h2><ul class="tags"><li><a href="/tags/info.html">info</a> (6) </li><li><a href="/tags/x-html.html">(X)HTML</a> (8) </li><li><a href="/tags/css.html">CSS</a> (10) </li><li><a href="/tags/ajax.html">Ajax</a> (14) </li><li><a href="/tags/javascript.html">JavaScript</a> (50) </li><li><a href="/tags/untitle.html">untitle</a> (4) </li><li><a href="/tags/cms.html">CMS</a> (2) </li><li><a href="/tags/xoops.html">XOOPS</a> (1) </li><li><a href="/tags/tsurezure.html">TsureZure</a> (8) </li><li><a href="/tags/bug.html">bug</a> (3) </li><li><a href="/tags/wordpress.html">wordpress</a> (6) </li><li><a href="/tags/funny.html">funny</a> (2) </li><li><a href="/tags/apache.html">apache</a> (1) </li><li><a href="/tags/php.html">PHP</a> (13) </li><li><a href="/tags/fedoracore.html">FedoraCore</a> (7) </li><li><a href="/tags/mysql.html">MySQL</a> (1) </li><li><a href="/tags/proftpd.html">proftpd</a> (2) </li><li><a href="/tags/virtualpc.html">VirtualPC</a> (3) </li><li><a href="/tags/java.html">Java</a> (4) </li><li><a href="/tags/x-html-css.html">(X)HTML+CSS</a> (6) </li><li><a href="/tags/linux.html">Linux</a> (26) </li><li><a href="/tags/backtrack.html">backtrack</a> (3) </li><li><a href="/tags/crack.html">crack</a> (3) </li><li><a href="/tags/hack.html">hack</a> (4) </li><li><a href="/tags/centos.html">CentOS</a> (5) </li><li><a href="/tags/movabletype.html">MovableType</a> (1) </li><li><a href="/tags/actionscript3.html">ActionScript3</a> (4) </li><li><a href="/tags/flash.html">Flash</a> (9) </li><li><a href="/tags/fedora.html">Fedora</a> (2) </li><li><a href="/tags/aliases.html">aliases</a> (1) </li><li><a href="/tags/sendmail.html">sendmail</a> (3) </li><li><a href="/tags/eva.html">eva</a> (2) </li><li><a href="/tags/pear.html">pear</a> (2) </li><li><a href="/tags/adobe-air.html">Adobe AIR</a> (1) </li><li><a href="/tags/aptana.html">Aptana</a> (2) </li><li><a href="/tags/android.html">Android</a> (5) </li><li><a href="/tags/oop.html">OOP</a> (1) </li><li><a href="/tags/api.html">API</a> (2) </li><li><a href="/tags/bash.html">bash</a> (2) </li><li><a href="/tags/adobe.html">Adobe</a> (1) </li><li><a href="/tags/ruby.html">Ruby</a> (12) </li><li><a href="/tags/美人時計.html">美人時計</a> (9) </li><li><a href="/tags/web-service.html">web service</a> (2) </li><li><a href="/tags/twitter.html">twitter</a> (1) </li><li><a href="/tags/tripwire.html">Tripwire</a> (1) </li><li><a href="/tags/ipad.html">iPad</a> (5) </li><li><a href="/tags/iphone.html">iPhone</a> (5) </li><li><a href="/tags/macosx.html">MacOSX</a> (4) </li><li><a href="/tags/objective-c.html">Objective-C</a> (4) </li><li><a href="/tags/zsh.html">zsh</a> (2) </li><li><a href="/tags/c.html">C</a> (1) </li><li><a href="/tags/spamassassin.html">Spamassassin</a> (1) </li><li><a href="/tags/xcode.html">Xcode</a> (1) </li><li><a href="/tags/rsync.html">Rsync</a> (1) </li><li><a href="/tags/postgresql.html">PostgreSQL</a> (1) </li><li><a href="/tags/guruplug.html">GuruPlug</a> (1) </li><li><a href="/tags/arduino.html">Arduino</a> (1) </li><li><a href="/tags/processing.html">Processing</a> (7) </li><li><a href="/tags/smartphone.html">smartphone</a> (2) </li><li><a href="/tags/ruby-on-rails.html">Ruby on Rails</a> (5) </li><li><a href="/tags/kinect.html">kinect</a> (1) </li><li><a href="/tags/openframeworks.html">openFrameworks</a> (1) </li><li><a href="/tags/ms-dos.html">MS-DOS</a> (1) </li><li><a href="/tags/powershell.html">Powershell</a> (1) </li><li><a href="/tags/python.html">Python</a> (2) </li><li><a href="/tags/titanium.html">Titanium</a> (1) </li><li><a href="/tags/google-app-engine.html">Google App Engine</a> (1) </li><li><a href="/tags/html5.html">HTML5</a> (2) </li><li><a href="/tags/jquery.html">jQuery</a> (4) </li><li><a href="/tags/responsive.html">responsive</a> (1) </li><li><a href="/tags/imagemagick.html">ImageMagick</a> (1) </li><li><a href="/tags/paas.html">PaaS</a> (1) </li><li><a href="/tags/redmine.html">Redmine</a> (1) </li><li><a href="/tags/roomba.html">roomba</a> (1) </li><li><a href="/tags/canvas.html">canvas</a> (1) </li><li><a href="/tags/pavuk.html">pavuk</a> (1) </li><li><a href="/tags/wget.html">wget</a> (1) </li><li><a href="/tags/find.html">find</a> (1) </li><li><a href="/tags/xargs.html">xargs</a> (1) </li><li><a href="/tags/css3.html">CSS3</a> (1) </li><li><a href="/tags/coffeescript.html">CoffeeScript</a> (1) </li><li><a href="/tags/grunt.html">Grunt</a> (1) </li><li><a href="/tags/sass-compass.html">Sass/Compass</a> (1) </li><li><a href="/tags/typescript.html">TypeScript</a> (2) </li><li><a href="/tags/middleman.html">middleman</a> (1) </li><li><a href="/tags/cygwin.html">cygwin</a> (1) </li><li><a href="/tags/typescript.html">typescript</a> (1) </li><li><a href="/tags/リニューアル.html">リニューアル</a> (1) </li><li><a href="/tags/js.html">JS</a> (1) </li><li><a href="/tags/cabinjs.html">CabinJS</a> (1) </li><li><a href="/tags/git.html">Git</a> (1) </li><li><a href="/tags/sass.html">sass</a> (1) </li><li><a href="/tags/scss.html">scss</a> (1) </li><li><a href="/tags/rails.html">Rails</a> (1) </li><li><a href="/tags/compass.html">compass</a> (1) </li><li><a href="/tags/martini.html">martini</a> (1) </li><li><a href="/tags/go.html">Go</a> (7) </li><li><a href="/tags/golang.html">Golang</a> (6) </li><li><a href="/tags/gom.html">gom</a> (1) </li><li><a href="/tags/meteor.html">meteor</a> (1) </li><li><a href="/tags/edison.html">Edison</a> (1) </li><li><a href="/tags/iot.html">IOT</a> (1) </li><li><a href="/tags/github.html">GitHub</a> (1) </li><li><a href="/tags/github-pages.html">GitHub Pages</a> (1) </li><li><a href="/tags/gnu.html">GNU</a> (1) </li><li><a href="/tags/coreutils.html">coreutils</a> (1) </li><li><a href="/tags/raspberrypi.html">RaspberryPi</a> (1) </li><li><a href="/tags/raspbian.html">raspbian</a> (1) </li><li><a href="/tags/linux.html">linux</a> (1) </li><li><a href="/tags/golang.html">golang</a> (1) </li><li><a href="/tags/diary.html">diary</a> (1) </li><li><a href="/tags/go.html">go</a> (1) </li><li><a href="/tags/rails.html">rails</a> (1) </li></ul></section><section class="article-list"><h2> By Year </h2><ul class="years"><li><a href="/2015.html">2015</a> (10) </li><li><a href="/2014.html">2014</a> (17) </li><li><a href="/2013.html">2013</a> (4) </li><li><a href="/2012.html">2012</a> (8) </li><li><a href="/2011.html">2011</a> (20) </li><li><a href="/2010.html">2010</a> (38) </li><li><a href="/2009.html">2009</a> (45) </li><li><a href="/2008.html">2008</a> (31) </li><li><a href="/2007.html">2007</a> (15) </li></ul></section></div></aside><footer class="footer"><p class="copyright"> &copy;&nbsp;<a target="_blank" href="http://www.funnythingz.com">funnythingz</a></p></footer><script>
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1882060-2']);
      _gaq.push(['_trackPageview']);
      (function() {
       var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
       })();
    </script></body></html>